# Three-Stage Pipeline Architecture

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER VISITS WEBSITE                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CONTENT DETECTION LAYER                           â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Scans for T&C links ("terms", "conditions", "agreement")        â”‚
â”‚  â€¢ Checks if current page IS a T&C page                            â”‚
â”‚  â€¢ Extracts content from modals, iframes, expanded sections        â”‚
â”‚  â€¢ Filters: Only analyze if > 500 words                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CACHE CHECK LAYER                             â”‚
â”‚                                                                      â”‚
â”‚  â€¢ Check chrome.storage.local for cached analysis                   â”‚
â”‚  â€¢ Key: URL, Value: {summary, simplified, findings, timestamp}     â”‚
â”‚  â€¢ Cache TTL: 24 hours                                              â”‚
â”‚                                                                      â”‚
â”‚  IF CACHED â†’ Load instantly (< 1 second)                           â”‚
â”‚  IF NOT â†’ Proceed to Stage 1                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â•‘                  STAGE 1: SUMMARIZER API                            â•‘
â•‘                                                                      â•‘
â•‘  INPUT:  Full T&C text (5000+ words)                                â•‘
â•‘          "By subscribing to FluxAntivirus Pro, you hereby           â•‘
â•‘          acknowledge and agree to be bound by these Terms and       â•‘
â•‘          Conditions. The Service is provided by FluxTech            â•‘
â•‘          Solutions LLC, a Delaware corporation... [4900 more words]"â•‘
â•‘                                                                      â•‘
â•‘  PROCESS: Summarizer API with options:                              â•‘
â•‘           â€¢ type: "tldr"                                            â•‘
â•‘           â€¢ format: "plain-text"                                    â•‘
â•‘           â€¢ length: "short"                                         â•‘
â•‘                                                                      â•‘
â•‘  OUTPUT: Condensed summary (~200 words)                             â•‘
â•‘          "FluxAntivirus Pro offers a $1 trial for 30 days. After   â•‘
â•‘          the trial, it automatically renews at $99.99/month unless  â•‘
â•‘          cancelled 7 days before renewal. All fees are non-         â•‘
â•‘          refundable. Early termination within 12 months incurs a    â•‘
â•‘          50% fee of remaining payments..."                          â•‘
â•‘                                                                      â•‘
â•‘  TIME: ~3-5 seconds                                                 â•‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â•‘                  STAGE 2: REWRITER API                              â•‘
â•‘                                                                      â•‘
â•‘  INPUT:  Summary from Stage 1 (~200 words)                          â•‘
â•‘          "FluxAntivirus Pro offers a $1 trial for 30 days. After   â•‘
â•‘          the trial, it automatically renews at $99.99/month..."     â•‘
â•‘                                                                      â•‘
â•‘  PROCESS: Rewriter API with options:                                â•‘
â•‘           â€¢ tone: "more-casual"                                     â•‘
â•‘           â€¢ format: "plain-text"                                    â•‘
â•‘           â€¢ length: "as-is"                                         â•‘
â•‘           â€¢ sharedContext: "Terms for subscription service"         â•‘
â•‘           â€¢ context: "Rewrite for elderly users"                    â•‘
â•‘                                                                      â•‘
â•‘  OUTPUT: Simplified language (~200 words)                           â•‘
â•‘          "You pay $1 now for a 30-day trial. After 30 days, you'll â•‘
â•‘          be charged $99.99 every month automatically. To cancel,    â•‘
â•‘          you must send a letter at least 7 days before your next    â•‘
â•‘          payment. You can't get refunds. If you quit within a year, â•‘
â•‘          you pay a $600 cancellation fee..."                        â•‘
â•‘                                                                      â•‘
â•‘  TIME: ~2-4 seconds                                                 â•‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â”
â•‘                  STAGE 3: PROMPT API                                â•‘
â•‘                                                                      â•‘
â•‘  INPUT:  Simplified text from Stage 2 (~200 words)                  â•‘
â•‘          "You pay $1 now for a 30-day trial. After 30 days..."     â•‘
â•‘                                                                      â•‘
â•‘  PROCESS: Prompt API with detection instructions:                   â•‘
â•‘           "Analyze this terms of service for:                       â•‘
â•‘           1. Auto-renewal clauses                                   â•‘
â•‘           2. Hidden fees after trial                                â•‘
â•‘           3. Non-refundable charges                                 â•‘
â•‘           4. Automatic credit card charges                          â•‘
â•‘           5. Price increases without notice                         â•‘
â•‘           6. Difficult cancellation requirements                    â•‘
â•‘           7. Early termination fees                                 â•‘
â•‘           Return JSON: {hasHiddenFees, severity, findings}"         â•‘
â•‘                                                                      â•‘
â•‘  OUTPUT: Structured analysis (JSON)                                 â•‘
â•‘          {                                                          â•‘
â•‘            "hasHiddenFees": true,                                   â•‘
â•‘            "severity": 4,                                           â•‘
â•‘            "findings": [                                            â•‘
â•‘              "$1 trial auto-renews at $99.99/month",                â•‘
â•‘              "Must cancel 7 days before renewal",                   â•‘
â•‘              "Early termination fee: $600",                         â•‘
â•‘              "All charges non-refundable"                           â•‘
â•‘            ]                                                        â•‘
â•‘          }                                                          â•‘
â•‘                                                                      â•‘
â•‘  TIME: ~3-6 seconds                                                 â•‘
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CACHE & DISPLAY                               â”‚
â”‚                                                                      â”‚
â”‚  1. SAVE to chrome.storage.local:                                   â”‚
â”‚     â€¢ Key: URL                                                      â”‚
â”‚     â€¢ Value: {summary, simplified, findings, severity, timestamp}   â”‚
â”‚                                                                      â”‚
â”‚  2. CREATE WARNING BANNER:                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚     â”‚ âš ï¸ WARNING: Potential Hidden Costs     â”‚                     â”‚
â”‚     â”‚                                        â”‚                     â”‚
â”‚     â”‚ â€¢ $1 trial auto-renews at $99.99/monthâ”‚                     â”‚
â”‚     â”‚ â€¢ Must cancel 7 days before renewal   â”‚                     â”‚
â”‚     â”‚ â€¢ Early termination fee: $600         â”‚                     â”‚
â”‚     â”‚ â€¢ All charges non-refundable          â”‚                     â”‚
â”‚     â”‚                                        â”‚                     â”‚
â”‚     â”‚ [View Full Analysis] [Dismiss]        â”‚                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                      â”‚
â”‚  3. PREPARE DETAILED MODAL:                                         â”‚
â”‚     â€¢ Section 1: Summary (Stage 1 output)                           â”‚
â”‚     â€¢ Section 2: Simplified (Stage 2 output)                        â”‚
â”‚     â€¢ Section 3: Key Findings (Stage 3 output)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Timeline

```
Timeline (First Analysis - Cold Start):
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”
â”‚ 0s â”‚ 1s â”‚ 2s â”‚ 3s â”‚ 4s â”‚ 5s â”‚ 6s â”‚ 7s â”‚ 8s â”‚ 9s â”‚10s â”‚11s â”‚12s â”‚13s â”‚14s â”‚15s
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
  â”‚                                                                         â”‚
  â”œâ”€â–º Content Detection (< 1s)                                            â”‚
  â”‚                                                                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STAGE 1: Summarizer API (3-5s)                              â”‚
  â”‚                                                                         â”‚
  â”‚              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STAGE 2: Rewriter API (2-4s)                 â”‚
  â”‚                                                                         â”‚
  â”‚                            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º STAGE 3: Prompt API (3-6s) â”‚
  â”‚                                                                         â”‚
  â”‚                                                  â”œâ”€â”€â–º Cache & Display  â”‚
  â”‚                                                                         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º DONE

Total Time: 10-15 seconds


Timeline (Cached Analysis - Warm Start):
â”Œâ”€â”€â”€â”€â”
â”‚ 0s â”‚ 1s
â””â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â–º Cache Hit
  â”‚
  â””â”€â”€â–º Display
       
Total Time: < 1 second (instant)
```

---

## ğŸ”€ API Fallback Chain

```
STAGE 2: Rewriter API
        â”‚
        â”œâ”€â”€â”€ Available? â”€â”€YESâ”€â”€â–º Use Rewriter API
        â”‚                         â”‚
        â””â”€â”€â”€ Available? â”€â”€NOâ”€â”€â”€â–º Use Prompt API (Fallback)
                                  â”‚
                                  "Rewrite in simple language..."


STAGE 3: Prompt API
        â”‚
        â”œâ”€â”€â”€ Response Valid JSON? â”€â”€YESâ”€â”€â–º Parse & Use
        â”‚                                   â”‚
        â””â”€â”€â”€ Response Valid JSON? â”€â”€NOâ”€â”€â”€â–º Manual Parsing (Fallback)
                                            â”‚
                                            Extract key phrases
```

---

## ğŸ¯ Data Size Reduction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INPUT: Full T&C                            â”‚
â”‚                                                               â”‚
â”‚  Size: ~5000 words (~30,000 characters)                      â”‚
â”‚  Reading Time: 25 minutes                                    â”‚
â”‚  Complexity: Legal jargon, complex sentences                 â”‚
â”‚                                                               â”‚
â”‚  "By subscribing to FluxAntivirus Pro ("the Service"),       â”‚
â”‚  you hereby acknowledge and agree to be bound by these       â”‚
â”‚  Terms and Conditions. The Service is provided by            â”‚
â”‚  FluxTech Solutions LLC, a Delaware corporation              â”‚
â”‚  registered at... [4950 more words]"                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼ STAGE 1: Summarizer
                            â”‚ (94% reduction)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               STAGE 1 OUTPUT: Summary                         â”‚
â”‚                                                               â”‚
â”‚  Size: ~200 words (~1,200 characters)                        â”‚
â”‚  Reading Time: 1 minute                                      â”‚
â”‚  Complexity: Still formal, but condensed                     â”‚
â”‚                                                               â”‚
â”‚  "FluxAntivirus Pro offers a $1 trial for 30 days.          â”‚
â”‚  After the trial, it automatically renews at $99.99/month    â”‚
â”‚  unless cancelled 7 days before renewal. All fees are        â”‚
â”‚  non-refundable. Early termination within 12 months          â”‚
â”‚  incurs a 50% fee..."                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼ STAGE 2: Rewriter
                            â”‚ (Simplification)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             STAGE 2 OUTPUT: Simplified                        â”‚
â”‚                                                               â”‚
â”‚  Size: ~200 words (~1,200 characters)                        â”‚
â”‚  Reading Time: 1 minute                                      â”‚
â”‚  Complexity: Plain language, easy to understand              â”‚
â”‚                                                               â”‚
â”‚  "You pay $1 now for a 30-day trial. After 30 days,         â”‚
â”‚  you'll be charged $99.99 every month automatically.         â”‚
â”‚  To cancel, you must send a letter at least 7 days          â”‚
â”‚  before your next payment. You can't get refunds.            â”‚
â”‚  If you quit within a year, you pay a $600 fee..."          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼ STAGE 3: Prompt
                            â”‚ (Extraction)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STAGE 3 OUTPUT: Key Findings                     â”‚
â”‚                                                               â”‚
â”‚  Size: 4 bullet points (~60 words)                           â”‚
â”‚  Reading Time: 15 seconds                                    â”‚
â”‚  Complexity: Action items, clear warnings                    â”‚
â”‚                                                               â”‚
â”‚  â€¢ $1 trial auto-renews at $99.99/month                      â”‚
â”‚  â€¢ Must cancel 7 days before renewal                         â”‚
â”‚  â€¢ Early termination fee: $600                               â”‚
â”‚  â€¢ All charges non-refundable                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

FINAL REDUCTION: 5000 words â†’ 4 bullet points (98% reduction)
USER BENEFIT: 25 minutes â†’ 15 seconds (99% time saved)
```

---

## ğŸ§  AI API Synergy

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 WHY THREE STAGES?                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  OPTION A: Single Prompt API Call                          â”‚
â”‚  âŒ Problem: Token limit (5000 words exceeds context)      â”‚
â”‚  âŒ Problem: Expensive (one large prompt)                  â”‚
â”‚  âŒ Problem: Less accurate (too much noise)                â”‚
â”‚                                                             â”‚
â”‚  OPTION B: Three-Stage Pipeline âœ…                         â”‚
â”‚  âœ… Summarizer: Purpose-built for condensing               â”‚
â”‚  âœ… Rewriter: Purpose-built for simplification             â”‚
â”‚  âœ… Prompt: Analyzes clean, focused input                  â”‚
â”‚  âœ… Result: More accurate, faster, better UX               â”‚
â”‚                                                             â”‚
â”‚  SYNERGY EFFECT:                                            â”‚
â”‚  Each API does what it's best at, feeding the next stage   â”‚
â”‚  Like a relay race - each runner specialized for their leg â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER EXPERIENCE FLOW                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. User visits subscription site                            â”‚
â”‚     â””â”€â–º Sees "$1 Trial" offer                               â”‚
â”‚         â””â”€â–º Clicks "Terms & Conditions" link                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. Extension detects T&C content                            â”‚
â”‚     â””â”€â–º Console: "Starting three-stage analysis..."         â”‚
â”‚         â””â”€â–º (10-15 seconds pass)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. Warning banner slides in                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚ âš ï¸ WARNING: Potential Hidden Costs   â”‚                â”‚
â”‚     â”‚                                      â”‚                â”‚
â”‚     â”‚ â€¢ $1 trial auto-renews at $99.99/mo â”‚                â”‚
â”‚     â”‚ â€¢ Must cancel 7 days before renewal â”‚                â”‚
â”‚     â”‚ â€¢ Early termination fee: $600       â”‚                â”‚
â”‚     â”‚ â€¢ All charges non-refundable        â”‚                â”‚
â”‚     â”‚                                      â”‚                â”‚
â”‚     â”‚ [View Full Analysis] [Dismiss]      â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. User clicks "View Full Analysis"                         â”‚
â”‚     â””â”€â–º Modal opens with 3 sections                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. Modal shows detailed breakdown                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚     â”‚ ğŸ“ Summary (Stage 1: Summarizer API) â”‚                â”‚
â”‚     â”‚ [Condensed 200-word version]         â”‚                â”‚
â”‚     â”‚                                      â”‚                â”‚
â”‚     â”‚ âœï¸ Simplified (Stage 2: Rewriter)    â”‚                â”‚
â”‚     â”‚ [Plain language version]             â”‚                â”‚
â”‚     â”‚                                      â”‚                â”‚
â”‚     â”‚ âš ï¸ Key Findings (Stage 3: Prompt)    â”‚                â”‚
â”‚     â”‚ â€¢ Finding 1                          â”‚                â”‚
â”‚     â”‚ â€¢ Finding 2                          â”‚                â”‚
â”‚     â”‚ â€¢ Finding 3                          â”‚                â”‚
â”‚     â”‚                                      â”‚                â”‚
â”‚     â”‚ [Close]                              â”‚                â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6. User decision                                            â”‚
â”‚     â”œâ”€â–º Understands hidden fees                             â”‚
â”‚     â”œâ”€â–º Calculates cost: $99 Ã— 12 = $1,188/year            â”‚
â”‚     â””â”€â–º Declines offer, closes tab                          â”‚
â”‚                                                              â”‚
â”‚  ğŸ’° OUTCOME: User saved $1,188 per year                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”’ Privacy & Security

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ON-DEVICE PROCESSING ONLY                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  âœ… All AI processing: Local (Gemini Nano)                 â”‚
â”‚  âœ… No data sent: To external servers                      â”‚
â”‚  âœ… No API keys: Required or stored                        â”‚
â”‚  âœ… No tracking: Of user behavior                          â”‚
â”‚  âœ… Cache stored: Locally (chrome.storage.local)           â”‚
â”‚                                                             â”‚
â”‚  USER DATA FLOW:                                            â”‚
â”‚  T&C Text â†’ Gemini Nano â†’ Cache â†’ Display                  â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â–º Never leaves device â—„â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture diagram shows how PhishGuard Vision's Hidden Fee Detector uses a sophisticated three-stage AI pipeline to transform complex legal documents into clear, actionable warningsâ€”all while maintaining complete user privacy through on-device processing.
